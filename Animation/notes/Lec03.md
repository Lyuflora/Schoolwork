# 计算机动画
0927
# Lecture 03 人物走步
## 人物走步建模
向前运动过程<br>
身体上下移动<br>
慢进慢出<br>
身体倾斜姿态 避免僵硬

### 走步的时间分配
跨出一步用多少张画面表示

### 走步中腿部的处理
![](https://i.imgur.com/bIva4yo.png)
<br>
腿部关节的角度随时间变化是非线性的
<br>

如果对腿部角度加权函数进行 **幅度调制**，就有可能生成腿部抬升角度不同的走步序列。

>
例如用一个因子<br>
F=1+A*sin( i*п/N) <br>
对加权函数相乘（式中 i 表表示第 i 幅幅画面的数标，N是一步内包含的画面数），其结果是加权函数中间几个值变大，在实际生成的走步系列中表现为腿抬得高一些。根据实验A的取值范围在0.1~0.3之间效果比较好。
![](https://i.imgur.com/gn1zMhW.png)

### 胳膊
![](https://i.imgur.com/mXlzHL9.png)
<br>

### 身体协调
<br>
![](https://i.imgur.com/HWo7Pbp.png)

## 一个动画角色骨架提取系统
目标: 在手工绘制的人物或动物走步或跑步序列中提取骨架;
利用上述提取的骨架信息控制一些形状元素,生成动画

## 三维变形技术：线性插值
在3D空间给定两个关键帧，通过一个参数从0到1来改变物体的变换程度以生成一系列中间物体。
主要问题是找出**两个3D物体之间的对应关系**——因为两个多面体一般有不同数量的顶点，构成物体面片数量也不同。<br>
**FFD**

### 贝塞尔曲线(Bezier Curve)
给定空间n+1个控制点的位置矢量Pi,一个n阶贝塞尔曲线可以定义为Bernstein基函数的加权和
![](https://i.imgur.com/iKSL1dx.png)
<br>什么是Bernstein基函数：<br>
![](https://i.imgur.com/F0qQsOf.png)

## 2D FFD 
在未变形区域中把两个对角记为(Xmin,Ymin) 和(Xmax,Ymax), m和n在垂直和水平方向把区域分成m+1和n+1控制节点.
算法：
<br>
1. 计算区域内每个要变的点`(s,t)`坐标, 如点P的直角坐标是`(x,y)`,其`(s, t)`坐标为:<br>![](https://i.imgur.com/sF80DNO.png)<br>![](https://i.imgur.com/2YCyUPz.png)<br>
2. 计算变形点的坐标`X(s,t)=(X,Y,W)`,代入(s,t)<br>![](https://i.imgur.com/0BWlpZu.png)<br>`B..`是**Bernstein**多项式<br>
3. FFD把每个`垂直`的线影射到一个**n阶贝塞尔曲线**上,把每个`水平`线影射到一个m阶贝塞尔曲线上.


